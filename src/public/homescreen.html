<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Homescreen – Global Garden</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #000;
      overflow: hidden;
    }

    #map-container {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      z-index: 1;
      mask: radial-gradient(ellipse 90% 85% at center, black 70%, transparent 100%);
      -webkit-mask: radial-gradient(ellipse 90% 85% at center, black 70%, transparent 100%);
    }

    #svgMap {
      width: 100vw;
      height: 100vh;
      display: block;
    }

    #country-tooltip {
      z-index: 10;
    }

    .title-box, .info-button {
      z-index: 20;
    }

    .title-box {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0,0,0,0.85);
      color: #fff;
      padding: 16px;
      border-radius: 8px;
      max-width: 300px;
      font-family: sans-serif;
    }

    .title-box h1 {
      margin: 0 0 8px 0;
      font-size: 20px;
    }

    .title-box p {
      margin: 0;
      font-size: 14px;
      line-height: 1.4;
      color: #ccc;
    }

    .info-button {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #111;
      color: #fff;
      padding: 8px 16px;
      border: 1px solid #444;
      border-radius: 6px;
      text-decoration: none;
      font-size: 14px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .info-button:hover {
      background: #333;
    }

    .zoom-controls {
      position: absolute;
      bottom: 20px;
      left: 20px;
      display: flex;
      flex-direction: column;
      gap: 5px;
      z-index: 1000;
    }

    .zoom-controls button {
      width: 30px;
      height: 30px;
      background: #000;
      color: #fff;
      border: 1px solid #333;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .zoom-controls button#zoom-reset {
      font-size: 10px;
    }
  </style>
</head>
<body>
  <div class="title-box">
    <h1>Global Garden</h1>
    <p>
      A digital world map where each country is represented by a unique flower.<br>
      The shape, color, and growth of each bloom are based on environmental factors
      like CO₂ emissions, biodiversity, or renewable energy usage.
    </p>
  </div>

  <a href="info.html" class="info-button">Info</a>

  <div id="map-container" style="position:relative; margin-top:-40px; margin-left:auto; margin-right:-200px; overflow:hidden; cursor:grab;">
    <div id="svgMap" style="width:100%; height:800px; transition:transform 0.1s ease-out; transform-origin: center;"></div>
    <div id="country-tooltip" style="display:none; position:absolute; background:#000; color:#fff; padding:6px 12px; border-radius:6px; pointer-events:none; font-size:15px; z-index:10;"></div>
    <div class="zoom-controls">
      <button id="zoom-in">+</button>
      <button id="zoom-out">−</button>
      <button id="zoom-reset">⌂</button>
    </div>
  </div>

  <script>
    const mapContainer = document.getElementById('map-container');
    const tooltip = document.getElementById('country-tooltip');
    const svgObject = document.getElementById('svgMap');

    const countryNames = {
      'ad': 'Andorra',
      'al': 'Albanien',
      'am': 'Armenien',
      'at': 'Österreich',
      'az': 'Aserbaidschan',
      'ba': 'Bosnien und Herzegowina',
      'be': 'Belgien',
      'bg': 'Bulgarien',
      'by': 'Weißrussland',
      'ch': 'Schweiz',
      'cy': 'Zypern',
      'cz': 'Tschechien',
      'de': 'Deutschland',
      'dk': 'Dänemark',
      'ee': 'Estland',
      'es': 'Spanien',
      'fi': 'Finnland',
      'fr': 'Frankreich',
      'gb': 'Vereinigtes Königreich',
      'ge': 'Georgien',
      'gr': 'Griechenland',
      'hr': 'Kroatien',
      'hu': 'Ungarn',
      'ie': 'Irland',
      'is': 'Island',
      'it': 'Italien',
      'li': 'Liechtenstein',
      'lt': 'Litauen',
      'lu': 'Luxemburg',
      'lv': 'Lettland',
      'mc': 'Monaco',
      'md': 'Moldau',
      'me': 'Montenegro',
      'mk': 'Nordmazedonien',
      'mt': 'Malta',
      'nl': 'Niederlande',
      'no': 'Norwegen',
      'pl': 'Polen',
      'pt': 'Portugal',
      'ro': 'Rumänien',
      'rs': 'Serbien',
      'ru': 'Russland',
      'se': 'Schweden',
      'si': 'Slowenien',
      'sk': 'Slowakei',
      'sm': 'San Marino',
      'tr': 'Türkei',
      'ua': 'Ukraine',
      'va': 'Vatikan',
      'gl': 'Grönland'
    };

    let scale = 1.5;
    let translateX = 100;
    let translateY = 0;
    let isDragging = false;
    let lastMouseX = 0;
    let lastMouseY = 0;

    const zoomInBtn = document.getElementById('zoom-in');
    const zoomOutBtn = document.getElementById('zoom-out');
    const zoomResetBtn = document.getElementById('zoom-reset');

    function updateTransform() {
      const maxMoveX = Math.max(0, (scale - 1.2) * 120);
      const maxMoveY = Math.max(0, (scale - 1.2) * 150);
      translateX = Math.max(-maxMoveX + 100, Math.min(maxMoveX + 100, translateX));
      translateY = Math.max(-maxMoveY, Math.min(maxMoveY, translateY));
      svgObject.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
    }

    zoomInBtn.addEventListener('click', () => {
      scale = Math.min(scale * 1.2, 5);
      updateTransform();
    });

    zoomOutBtn.addEventListener('click', () => {
      scale = Math.max(scale / 1.2, 1.3);
      updateTransform();
    });

    zoomResetBtn.addEventListener('click', () => {
      scale = 1.5;
      translateX = 100;
      translateY = 0;
      updateTransform();
    });

    mapContainer.addEventListener('wheel', e => {
      e.preventDefault();
      const rect = mapContainer.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;
      const oldScale = scale;

      scale = e.deltaY < 0 ? Math.min(scale * 1.1, 5) : Math.max(scale / 1.1, 1.3);
      const scaleDiff = scale - oldScale;

      translateX -= (mouseX - translateX) * scaleDiff / oldScale;
      translateY -= (mouseY - translateY) * scaleDiff / oldScale;

      updateTransform();
    });

    mapContainer.addEventListener('mousedown', e => {
      if (e.target.closest('#svgMap') || e.target.tagName === 'path') {
        isDragging = true;
        lastMouseX = e.clientX;
        lastMouseY = e.clientY;
        mapContainer.style.cursor = 'grabbing';
        e.preventDefault();
      }
    });

    document.addEventListener('mousemove', e => {
      if (isDragging) {
        translateX += e.clientX - lastMouseX;
        translateY += e.clientY - lastMouseY;
        lastMouseX = e.clientX;
        lastMouseY = e.clientY;
        updateTransform();
      }
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      mapContainer.style.cursor = 'grab';
    });

    fetch('europe_map.svg')
      .then(response => response.text())
      .then(svgText => {
        svgObject.innerHTML = svgText;
        const svg = svgObject.querySelector('svg');
        if (svg) {
          svg.style.width = '100%';
          svg.style.height = '100%';
          svg.style.display = 'block';
        }
        updateTransform();

        const paths = svgObject.querySelectorAll('path[id]');
        paths.forEach(path => {
          const countryId = path.getAttribute('id');
          const countryName = countryNames[countryId] || countryId.toUpperCase();
          path.style.fill = '#111';
          path.style.stroke = '#aaa';
          path.style.strokeWidth = '0.3';
          path.style.cursor = 'pointer';
          path.style.transition = 'fill 0.2s ease';

          path.addEventListener('mouseenter', function () {
            if (!isDragging) {
              this.style.fill = '#4CAF50';
              tooltip.textContent = countryName;
              tooltip.style.display = 'block';
            }
          });

          path.addEventListener('mousemove', function (e) {
            if (!isDragging) {
              tooltip.style.left = `${e.clientX - mapContainer.getBoundingClientRect().left + 10}px`;
              tooltip.style.top = `${e.clientY - mapContainer.getBoundingClientRect().top + 10}px`;
            }
          });

          path.addEventListener('mouseleave', function () {
            this.style.fill = '#111';
            tooltip.style.display = 'none';
          });
        });
      })
      .catch(error => console.error('Fehler beim Laden der SVG:', error));
  </script>
</body>
</html>